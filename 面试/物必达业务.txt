骑士星球业务
      站点管理  
             站点配置 
             业务是否开通
             商家的管理：
                       商家账户信息的查询
                       商家后付信息的查询与配置，有后付额度与结算周期
             	       商家店铺的配置,营业执照的审核

      配送员管理
                配送上传个人驾驶证,等信息，可以查询个人战绩,订单统计等功能
      配送员接单：
                属于该分单的配送员才能接单，接单后需要使用消息队列更新接单的时间等信息
                接单,检查订单的状态,更新订单的状态，更新取货时间,消息队列通知三方
                一件下单:需要先补录信息,校验参数，计算配送费,补录信息后自动支付,如果余额就用余额进行支付,如果没有就是用后附,需要判断后附额度,如果有一个账单还未还款也不能使用后附
               订单送达  检查状态，更新状态
               订单转单,需要判断订单的状态再送达以前都可以转,但是转单需要通知其它快递员接受,使用消息队列通知
               订单取消：订单在送达之前都可以取消,如果订单是除了已创建之外的其它状态都能进行退款，查询订单的支付渠道,如果是实时，后付，余额支付三种支付方式，做对应的退款,后付只取消对应的欠款明细
               
                
		
      商家下单
             下单功能：
	     普通下单：
                             校验参数:地址，商家，取货时间，寄货地址，站点id，有无配送员营业，营业时间
                             计算配送费,创建主订单，同时生成交易带支付信息表，返回订单id给用户
                             支付的时候创建order-trade信息
                     一件下单：
	             大致类似,但是没有收获地址，会判断用户的后附支付的配置，如果额度够就能够使用余额支付


             l起微信支付：拿去appidcopenid跟tradeId去M行支付
             x取wen'xin配置，选择微信的支付模式，创建支付流水
             发起支付请求,将请求响应的对象返回给前端，前端吊起支付后,
             微信再回掉我们微信支付成功的接口，完成支付成功的功能
             发起余额后付：可以做一些活动,充多少送多少，但用户支付扣款是
            先扣用户余额表里面的数据,用户支付就去调用我们trade模块,然后将
            用户扣完款后回调,通知用户
            如果回{是用舻钐变为作废需要对用户进行退款
            打印机设置 用于打印小票之类的
            涉及功能：
                    充值配置，充值记录查询，固定充值金额，自定义充值金额，消费记录及明细

	

      订单调度
             站点调度,查询没有被调度过的订单
             未接单(已分单状态下的未接订单),预约单(预约配送时间),未分配的订单(到达预计取件时间前预约单变为未分单)
             查询地图上可以分单的快递员,及相关的携单量
             订单分配给快递员
                    查询订单的状态，如果有退款的订单不能分单，
                    只有支付分单,接单，取货的才能够将订单可分，
                    将分单的信息记录,发送分单事件,
	    快递员，快递员单号及订单单号给mq,有时候有短信不能用了，需要进行重试,
	    放到mq重试不会影响用户的体验
	    发送短信跟通知给两个配送员
                    
      规则相关
              派单规则：派单的时间，及用户的最带携单量
              配送费规则：开始时间结束时间，最大距离，距离的计费对象
              配送时效考核:开始时间段，每个距离应该有多少配送时间
              范围相关的规则：经纬度,及相应的数组
              结算规则: 跟配送费规则差不多
              商家自定义的计费规则，由站点进行配置

      账户充值
              根据用户选择的充值信息，返回tradeid,由前端吊起微信支付后,微信通知我们，我们去对用户的账户做充值处理
	用户充值后,线下还款	 查询账单信息,查询账单详情 

      信用支付	
                用户开启后付配置,设置后附额度余还款的账期,我们负责提供报表，与线上线下还款功能,主要还是由财务去进行催款之类的

跑腿订单
       用户的跑腿开始时间, 跑腿结束时间，费用配置    
      
      
 定时任务:
      订单超时未支付,取消
      订单分单
             查询分担配置，查询快递员携带订单的地址信息，收获地址与送货地址分离用于判断
             1.比较订单的取货单数,未取货有开始单数，未取或开始地址单数
             2.比较距离,因为高德地图的接口调用次数可能会很多，因此就在本地做缓存
             3.缓存两个订单起点与终点之间的距离
             正式进行分单
                     当订单数不同时，订单量少的快递员去配送
                     当快递员有未知的取货地址,由这个快递员优先去取货，把地址信息填满,就不会给该用户分单了
	    4.当订单的数量相同的时候,判断是否满足时效规则，不满足去判断下一个快递员，如果不满足，则还是去第一个快递员配送
                     5.分配订单给快递员
                      
      后附账单出账,
      短信通知用户